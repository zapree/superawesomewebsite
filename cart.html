<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8" />
		<title>Cart Dripping with Awesome</title>
		<meta name="author" content="Eugene Balaguer, Parker Mathewson" />
		<meta name="description" content="Our super awesome csc337 project" />
		<link href="css/superawesomestyle.css" rel="stylesheet" type="text/css">
		<script src="js/jquery-2.1.0.min.js"></script>
		<!-- Date: 2014-01-29 -->
		<!-- AUTHORS Eugene Balaguer and Parker Mathewson -->
		<script src="js/main_script.js"></script>
		
	</head>

	<body>
		<header>
			<div>
			<h1 class="rotate">
				<a class="banner" href="index.html"><img id="banner" alt="Super Awesome Banner" src="pictures/banner_SuperAwesomePicture.png" /></a>
			</h1>
			<nav>
				<ul class="nav">
					<li>
						<a href="products.html">Products</a>
						<ul>
							<li class="productdrop"><a href="product.html">Super Awesome Yacht Island</a></li>
							<li class="productdrop"><a href="">Super Awesome Shirt</a></li>
							<li class="productdrop"><a href="">Super Awesome Penguins</a></li>
							<li class="productdrop"><a href="">Super Awesome Car</a></li>
						</ul>
					</li>
		
					<li>
						<a href="blog.html">Blog</a>
					</li>
					<li>
						<a href="about.html">About</a>
					</li>
					<li>
						<a href="cart.html">Cart</a>
					</li>
				</ul>
			</nav>
			</div>
		</header>
		<h2>Shopping Cart</h2>
		<form action="shipping.html" method="post">
			<table id="cart_table" class="altgreen" cellspacing="0">
				<tr>
					<td> </td>
					<td><input class="button" id='shopping_button' type="submit" value="Continue" /></td>
					<td> </td>
					<td> </td>
					<td> </td>
				</tr>
			</table>
		</form>
		<footer> <p class="foot"> &copy; 2014 Eugene Balaguer, Parker Mathewson.  All rights reserved. </p></footer>
		<script>
			rotateBanner(".rotate", "source.html");
		</script>

		<script>
			cart_products = {
			yacht : new CartItem("Super Awesome Island Yacht", 1000000000.00, 0),
			car : new CartItem("Super Awesome Car", 300000.00, 0),
			tee : new CartItem("Super Awesome Tee", 20.00, 0),
			penguin : new CartItem("Super Awesome Penguins", 400000.00, 0)
			};
			
			var the_cart = new Cart();
			for(product in cart_products){
				
				the_cart.addcartitem(cart_products[product]);
			}
		
			var table = $('#cart_table');
			var header = $("<tr></tr>");
			header.attr("id", "header_row");
			$('<th></th>').text("Product").appendTo(header);
			$('<th></th>').text("Price").appendTo(header);
			$('<th></th>').text("Quantity").appendTo(header);
			$('<th></th>').text("Line Total").appendTo(header);
			$('<th></th>').text("").appendTo(header);
			header.insertBefore($("#shopping_button"));
			var total_line = $("<tr></tr>");
			total_line.attr("id", "total_line");
			$('<td></td>').text(" ").appendTo(total_line);
			$('<td></td>').text(" ").appendTo(total_line);
			$('<td></td>').text("Total").appendTo(total_line);
			var total = $('<td></td>');
			total.attr("id", "total");
			total.text("$"+the_cart.cart_total.toString().replace( /(\d)(?=(\d{3})+$)/g, "$1,"  )+".00");
			total_line.append(total);
			total_line.insertBefore($("#shopping_button"));
			
			
			
			for(item_num in the_cart.item_list){
				var new_row = $("<tr></tr>");
				var item = the_cart.item_list[item_num];
				cell_list = [item.product, item.price, item.quantity, item.line_total];
				for(cell in cell_list){
					if( cell != 1 && cell != 3){
						$('<td></td>').text(cell_list[cell]).appendTo(new_row);
					}
					else  $('<td></td>').text("$" +cell_list[cell].toString().replace( /(\d)(?=(\d{3})+$)/g, "$1,")+".00").appendTo(new_row);
				}
				var butt = $('<input></input>');
				butt.attr({'type':'button','name':'javaSubmit','value':'Remove'});
				butt.click(function() {
					$(this).parent('tr').remove();
					console.log($(this).parent('tr').find('td:first').text());
					the_cart.removecartitem($(this).parent('tr').find('td:first').text());
					$("#total").text("$"+the_cart.cart_total.toString().replace( /(\d)(?=(\d{3})+$)/g, "$1,"  )+".00");
					$("#total").parent('tr').css("background", "none");
  				});
				new_row.append(butt);
				new_row.insertBefore($("#total_line"));
				
			}
			table.find('hr').css("");
			table.children().css("padding", "10px 33px");
			table.children().css("padding", "10px 33px");
				
			
		</script>
	</body>
	
</html>
